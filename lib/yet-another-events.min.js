(function(){var a,b,c,d,e=this,f={}.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d={},(typeof module!="undefined"&&module!==null?module.exports:void 0)!=null?module.exports=d:(c=this.yae,this.yae=d,d.noConflict=function(){return e.yae=c,d}),d.Event=b=function(){function a(a){a==null&&(a=null),this._data=a,this._emitter=null}return a.prototype.data=function(a){return a!==void 0?(this._data=a,this):this._data},a.prototype.emitter=function(a){return a!==void 0?(this._emitter=a,this):this._emitter},a.prototype.clone=function(){return new a(this.data())},a.prototype.sub=function(a){var b;return a==null&&(a=null),b=function(a){function b(a){a==null&&(a=null),b.__super__.constructor.call(this,a)}return g(b,a),b.prototype.clone=function(){return new b(this.data())},b}(this.constructor),new b(a)},a}(),d.event=function(a){return a==null&&(a=null),new b(a)},d.Emitter=a=function(){function a(){this._items=[]}return a.prototype.on=function(a,c,d){var e,f,g,h,i,j;d==null&&(d=void 0);if(a instanceof b||a instanceof Function){if(c instanceof Function){e=a instanceof b?a.constructor:a,d=d?d:void 0,f=!1,j=this._items;for(h=0,i=j.length;h<i;h++){g=j[h];if(g[0]===e&&g[1]===c&&g[2]===d){f=!0;break}}return f||this._items.push([e,c,d]),this}throw new Error("f must be Function")}throw new Error("e must be Event or Function")},a.prototype.off=function(a,c,d){var e,f,g,h,i,j,k,l,m;a==null&&(a=void 0),c==null&&(c=void 0),d==null&&(d=void 0),e=a instanceof b?a.constructor:a,j=[];for(i=k=0,l=this._items.length;0<=l?k<l:k>l;i=0<=l?++k:--k)m=this._items[i],f=m[0],h=m[1],g=m[2],(!e||e===f)&&(!c||c===h)&&(!d||d===g)&&j.push(i);while(j.length)this._items.splice(j.pop(),1);return this},a.prototype.emit=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;a=a instanceof Function?new a:a,a=a.clone().emitter(this),g=function(){var b,c,d,f;d=this._items,f=[];for(b=0,c=d.length;b<c;b++)e=d[b],a instanceof e[0]&&f.push(e);return f}.call(this);for(h=0,j=g.length;h<j;h++){f=g[h],d=!1,l=this._items;for(i=0,k=l.length;i<k;i++){e=l[i];if(e[0]===f[0]&&e[1]===f[1]&&e[2]===f[2]){d=!0;break}}d&&(m=f.slice(1),c=m[0],b=m[1],c.call(b,a))}return this},a.prototype.triggers=function(a){var b,c,d,e;a=a instanceof Function?new a:a,e=this._items;for(c=0,d=e.length;c<d;c++){b=e[c];if(a instanceof b[0])return!0}return!1},a.prototype.matches=function(a){var c,d,e,f,g;c=a instanceof b?a.constructor:a,g=this._items;for(e=0,f=g.length;e<f;e++){d=g[e];if(d[0]===c)return!0}return!1},a}()}).call(this);